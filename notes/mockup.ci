load "utils.ci"
def TARGET 4

[this is a comment]
fn main : byte argc long argv
	byte a : 2
	byte b : 2
	byte c

	goto after_add if c < 8
	add &c, a, b
	out c

	mark after_add
	exit c

	[ Nested functions do not share a scope with their outer enclosure. Instead,
	  the nesting means this function can only be used within the outer scope. ]
	fn add : long res byte op1 byte op2
		@res : a + b
		@(res + byte * 2)
		exit 0
	end

	fn sub : long res byte a byte b
		@res : a + b
		exit 0
	end
end
